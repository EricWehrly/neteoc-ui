machine:
  node:
    version: 6.9.2

dependencies:
  override:
    - npm install

compile:
  override:
    - npm run build


deployment:
  production:
    branch: prod
    commands:
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
      - docker build -t  neteoc/neteoc-ui:latest .
      - docker push neteoc/neteoc-ui:latest
      - curl -v -X POST https://circleci.com/api/v1/project/neteoc/neteoc-server/tree/master?circle-token=$CIRCLE_TOKEN
  staging:
    branch: test
    commands:
      - aws s3 sync ./dist/ s3://test.neteoc.com --acl public-read



#notify:
#  webhooks:
    # A list of hook hashes, containing the URL field
  #  - url: https://registry.hub.docker.com/u/kerryhatcher/flare-server/trigger/383d27a4-34b4-4c14-a33e-29d0ef4dce82/
